name: Linux-Super-Fast

on: workflow_dispatch

jobs:
  linux-vpn:
    runs-on: ubuntu-latest
    timeout-minutes: 360 # 6 Hours Max

    steps:
      - name: 1. Install Tailscale
        run: |
          curl -fsSL https://tailscale.com/install.sh | sh

      - name: 2. Connect to Tailscale (VPN Mode)
        run: |
          # We enable SSH and Exit Node capability
          # This allows you to use it as a VPN or just a remote computer
          sudo tailscale up --authkey=${{ secrets.TAILSCALE_AUTH_KEY }} \
            --hostname="github-linux-box" \
            --ssh \
            --advertise-exit-node

      - name: 3. Connection Info
        run: |
          IP=$(tailscale ip -4)
          echo "=========================================="
          echo "      LINUX SERVER READY (NO LAG)         "
          echo "------------------------------------------"
          echo "   Tailscale IP : $IP"
          echo "   User         : runner"
          echo "   Hostname     : github-linux-box"
          echo "=========================================="

      - name: 4. Keep Alive
        run: |
          # Linux is efficient, so we just put it to sleep in a loop
          while true; do sleep 60; done
